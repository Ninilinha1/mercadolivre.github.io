!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BTSDK",[],t):"object"==typeof exports?exports.BTSDK=t():e.BTSDK=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";var r={initialTime:0,getCurrentTimestamp:function(){return Math.floor((new Date).getTime())},getCurrentDate:function(){var e=6e4*(new Date).getTimezoneOffset();return new Date(Date.now()-e).toISOString()},getTrackingTimestamp:function(){return Math.floor(this.getCurrentTimestamp()-this.initialTime)},initTimer:function(){this.initialTime=this.getCurrentTimestamp()},totalTime:function(){return this.getCurrentTimestamp()-this.initialTime}};e.exports=r},function(e,t,n){"use strict";var r={add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(t,n,!1)},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n)}};e.exports=r},function(e,t,n){"use strict";var r={getElement:function(e){return document.querySelector(e)},getElementValue:function(e){var t=this.getElement(e);return t&&t.value},getElementReference:function(e){return e.name||e.id},isSelectorValid:function(e){var t=document.createElement("br");try{t.querySelector(e)}catch(e){return!1}return!0},elementMatches:function(e,t){return"matches"in Element.prototype?e.matches(t):"matchesSelector"in Element.prototype?e.matchesSelector(t):"mozMatchesSelector"in Element.prototype?e.mozMatchesSelector(t):"msMatchesSelector"in Element.prototype?e.msMatchesSelector(t):"oMatchesSelector"in Element.prototype?e.oMatchesSelector(t):"webkitMatchesSelector"in Element.prototype&&e.webkitMatchesSelector(t)}};e.exports=r},function(e,t,n){"use strict";e.exports={defaultOptions:{type:"",trackDevice:!0,trackParams:!0,trackScreen:!0,trackKeyboard:!0,trackMouse:!0,trackGestures:!0,trackSpecial:!0,keyboardForm:"form",keyboardFields:'input[type="text"], input[type="email"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="url"], textarea',keyboardSensitive:"",keyboardIgnore:"",keyboardLimit:200,mouseLimit:200,gesturesLimit:10,swipeLimit:50,paramsConstants:{},paramsSelectors:{},paramsCookies:{},specialFields:'input:not([type="hidden"]), textarea, fieldset, select, button, datalist',postTo:"/bmsa/track/desktop",postAutomatic:!0},keyboardEventsCodes:{keydown:1,keyup:0},specialEventsCodes:{click:1,mousedown:2,dblclick:3,copy:4,cut:5,paste:6,dragstart:7,drop:8,keydown:9}}},function(e,t,n){"use strict";var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports="function"==typeof o.default?o.default:n(14)},function(e,t,n){"use strict";var r=n(11),o=n(2),i=n(0),a={load:function(e){var t={};if(!1===e.trackParams)return t;var n=o.getElement(e.keyboardForm);return t={host:document.location.href,form_name:n&&n.getAttribute("name")},Object.keys(e.paramsConstants).map(function(n){t[n]=e.paramsConstants[n]}),Object.keys(e.paramsSelectors).map(function(n){t[n]=o.getElementValue(e.paramsSelectors[n])}),Object.keys(e.paramsCookies).map(function(n){t[n]=r.getCookie(e.paramsCookies[n])}),t},complete:function(e){e.params.submit_date=i.getCurrentDate(),e.params.interaction_time=i.totalTime()}};e.exports=a},function(e,t,n){"use strict";var r=n(1),o=n(0),i={load:function(e){var t={};return!1===e.trackGestures?t:(t={scroll:!1,events:[]},r.add(document,"touchstart",function(n){if(t.events.length>0){t.events[t.events.length-1].length<2&&t.events.pop()}var r=o.getTrackingTimestamp();if(!(r<0)){var i=Math.floor(n.touches[0].clientX),a=Math.floor(n.touches[0].clientY);for(t.events.push([[i,a,r]]);t.events.length>e.gesturesLimit;)t.events.shift()}}),r.add(document,"touchmove",function(n){if(!(t.events.length<=0)){var r=Math.floor(n.touches[0].clientX),i=Math.floor(n.touches[0].clientY),a=t.events[t.events.length-1];if(a.length>0){var s=a[a.length-1];if(s[0]===r&&s[1]===i)return}var u=o.getTrackingTimestamp();if(!(u<0))for(a.push([r,i,u]);a.length>e.swipeLimit;)a.shift()}}),r.add(window,"scroll",function e(n){t.scroll=!0,r.remove(window,"scroll",e)}),t)},validateLastElement:function(e){if(e.events.length>0){e.events[e.events.length-1].length<2&&e.events.pop()}}};e.exports=i},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}var o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(2),s=n(1),u=n(0),c=n(3),l={load:function(e){var t=[];if(!1===e.trackSpecial)return t;var n=a.getElement(e.keyboardForm);return null===n?t:([].concat(r(n.querySelectorAll(e.specialFields))).map(function(e){var n=a.getElementReference(e);""!==n&&t.push({name:n,events:[],autofilled:!1})}),Object.keys(c.specialEventsCodes).map(function(e){s.add(window,e,function(e){t.map(function(t){if(t.name===a.getElementReference(e.target)){if("keydown"===e.type&&9!==(e.keyCode?e.keyCode:e.which))return;if("mousedown"===e.type&&3!==e.which)return;var n=u.getTrackingTimestamp();if(n<0)return;t.events.push([c.specialEventsCodes[e.type],n])}})})}),t)},complete:function(e){if(a.isSelectorValid("input:-webkit-autofill")){[].concat(r(document.querySelectorAll("input:-webkit-autofill"))).map(function(t){var n=a.getElementReference(t);""!==n&&e.special.map(function(e){e.name===n&&(e.autofilled=!0)})})}}};e.exports=l},function(e,t,n){"use strict";var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=n(10),u=n(5),c=n(12),l=n(13),f=n(15),p=n(6),d=n(7),m=n(0),v=n(1),h=n(16),g=n(2),y=function(){function e(t){r(this,e),this.options=o({},a.defaultOptions,t),m.initTimer(),this.result={device:s.load(this.options),params:u.load(this.options),screen:c.load(this.options),keyboard:l.load(this.options),special:d.load(this.options)},"web-mobile"==this.options.type?this.result.gestures=p.load(this.options):this.result.mouse=f.load(this.options),this.configurePost()}return i(e,[{key:"configurePost",value:function(){var e=this,t=g.getElement(this.options.keyboardForm);null!==t&&v.add(t,"submit",function(){e.options.postAutomatic&&h.post(e.result,e.options.postTo)})}},{key:"doTrack",value:function(){this.options.postAutomatic||h.post(this.result,this.options.postTo)}},{key:"getTrack",value:function(){return h.prepare(this.result)}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";var r={load:function(e){var t={};return!1===e.trackDevice?t:t={type:e.type,app_code_name:navigator.appCodeName,app_name:navigator.appName,app_version:navigator.appVersion,cookie_enabled:navigator.cookieEnabled,hardware_concurrency:navigator.hardwareConcurrency,language:navigator.language,languages:navigator.languages,online:navigator.onLine,platform:navigator.platform,product:navigator.product,product_sub:navigator.productSub,user_agent:navigator.userAgent,vendor:navigator.vendor}}};e.exports=r},function(e,t,n){"use strict";var r={setCookie:function(e,t,n){var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},eraseCookie:function(e){document.cookie=e+"=; Max-Age=-99999999;"}};e.exports=r},function(e,t,n){"use strict";var r=n(1),o=n(0),i={load:function(e){var t={};return!1===e.trackScreen?t:(t={total_width:screen.width,total_height:screen.height,client_width:document.documentElement.clientWidth,client_height:document.documentElement.clientHeight,avail_height:screen.availHeight,avail_width:screen.availWidth,color_depth:screen.colorDepth,pixel_depth:screen.pixelDepth,events:[]},r.add(window,"resize",function(e){var n=o.getTrackingTimestamp();n<0||t.events.push([document.documentElement.clientWidth,document.documentElement.clientHeight,n])}),t)}};e.exports=i},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}var o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(1),s=n(2),u=n(0),c=n(3),l={load:function(e){var t=[];if(!1===e.trackKeyboard)return t;var n=s.getElement(e.keyboardForm);return null===n?t:([].concat(r(n.querySelectorAll(e.keyboardFields))).map(function(n){var r=s.getElementReference(n);""!==r&&(e.keyboardIgnore&&s.elementMatches(n,e.keyboardIgnore)||t.push({name:r,events:[]}))}),Object.keys(c.keyboardEventsCodes).map(function(r){a.add(n,r,function(n){t.map(function(t){if(t.name===s.getElementReference(n.target)){var r=u.getTrackingTimestamp();if(!(r<0)){var o=n.keyCode?n.keyCode:n.which;if(!o||229==o||231==o){var i=n.target.selectionStart-1,a=i||0,l=n.target.value.substr(a,1);if(!l)return;o=l.charCodeAt(0)}var f=n.location;if(void 0!==o&&void 0!==f)for(e.keyboardSensitive&&s.elementMatches(n.target,e.keyboardSensitive)?t.events.push([c.keyboardEventsCodes[n.type],r]):t.events.push([c.keyboardEventsCodes[n.type],r,o,f]);t.events.length>e.keyboardLimit;)t.events.shift()}}})})}),t)}};e.exports=l},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,o=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},i=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(void 0===e?"undefined":r(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},s=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){var n,r=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!e(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,l,f=a(t,i(t));if(void 0!==f){c=e(r)?Object(new r):[];var p=f.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");l=0;for(var d,m;;){if(!(d=s(p)))return c.length=l,c;m=d.value,c[l]=u?u.call(n,m,l):m,l++}}else{var v=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var h=o(v.length);c=e(r)?Object(new r(h)):new Array(h),l=0;for(var g;l<h;)g=v[l],c[l]=u?u.call(n,g,l):g,l++;c.length=h}return c}}()},function(e,t,n){"use strict";var r=n(1),o=n(0),i={load:function(e){var t={};return!1===e.trackMouse?t:(t={scroll:!1,events:[]},r.add(document,"mousemove",function(n){if(t.events.length>0){var r=t.events[t.events.length-1];if(r[0]===n.clientX&&r[1]===n.clientY)return}var i=o.getTrackingTimestamp();if(!(i<0))for(t.events.push([n.clientX,n.clientY,i]);t.events.length>e.mouseLimit;)t.events.shift()}),r.add(window,"scroll",function e(n){t.scroll=!0,r.remove(window,"scroll",e)}),t)}};e.exports=i},function(e,t,n){"use strict";var r=n(5),o=n(7),i=n(6),a=n(17),s={post:function(e,t){var n="https://api.mercadolibre.com"+t,r=JSON.stringify(this.prepare(e));if(!navigator.sendBeacon){var o=new XMLHttpRequest;return o.open("POST",n,!0),void o.send(r)}navigator.sendBeacon(n,r)},prepare:function(e){r.complete(e),o.complete(e),e.gestures&&i.validateLastElement(e.gestures);var t=window.btoa(JSON.stringify(e));return{bd:t,check:a(""+t+e.device.user_agent)}}};e.exports=s},function(e,t,n){"use strict";!function(){var t=n(18),r=n(8).utf8,o=n(19),i=n(8).bin,a=function e(n,a){n.constructor==String?n=a&&"binary"===a.encoding?i.stringToBytes(n):r.stringToBytes(n):o(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||(n=n.toString());for(var s=t.bytesToWords(n),u=8*n.length,c=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;for(var m=e._ff,v=e._gg,h=e._hh,g=e._ii,d=0;d<s.length;d+=16){var y=c,b=l,k=f,w=p;c=m(c,l,f,p,s[d+0],7,-680876936),p=m(p,c,l,f,s[d+1],12,-389564586),f=m(f,p,c,l,s[d+2],17,606105819),l=m(l,f,p,c,s[d+3],22,-1044525330),c=m(c,l,f,p,s[d+4],7,-176418897),p=m(p,c,l,f,s[d+5],12,1200080426),f=m(f,p,c,l,s[d+6],17,-1473231341),l=m(l,f,p,c,s[d+7],22,-45705983),c=m(c,l,f,p,s[d+8],7,1770035416),p=m(p,c,l,f,s[d+9],12,-1958414417),f=m(f,p,c,l,s[d+10],17,-42063),l=m(l,f,p,c,s[d+11],22,-1990404162),c=m(c,l,f,p,s[d+12],7,1804603682),p=m(p,c,l,f,s[d+13],12,-40341101),f=m(f,p,c,l,s[d+14],17,-1502002290),l=m(l,f,p,c,s[d+15],22,1236535329),c=v(c,l,f,p,s[d+1],5,-165796510),p=v(p,c,l,f,s[d+6],9,-1069501632),f=v(f,p,c,l,s[d+11],14,643717713),l=v(l,f,p,c,s[d+0],20,-373897302),c=v(c,l,f,p,s[d+5],5,-701558691),p=v(p,c,l,f,s[d+10],9,38016083),f=v(f,p,c,l,s[d+15],14,-660478335),l=v(l,f,p,c,s[d+4],20,-405537848),c=v(c,l,f,p,s[d+9],5,568446438),p=v(p,c,l,f,s[d+14],9,-1019803690),f=v(f,p,c,l,s[d+3],14,-187363961),l=v(l,f,p,c,s[d+8],20,1163531501),c=v(c,l,f,p,s[d+13],5,-1444681467),p=v(p,c,l,f,s[d+2],9,-51403784),f=v(f,p,c,l,s[d+7],14,1735328473),l=v(l,f,p,c,s[d+12],20,-1926607734),c=h(c,l,f,p,s[d+5],4,-378558),p=h(p,c,l,f,s[d+8],11,-2022574463),f=h(f,p,c,l,s[d+11],16,1839030562),l=h(l,f,p,c,s[d+14],23,-35309556),c=h(c,l,f,p,s[d+1],4,-1530992060),p=h(p,c,l,f,s[d+4],11,1272893353),f=h(f,p,c,l,s[d+7],16,-155497632),l=h(l,f,p,c,s[d+10],23,-1094730640),c=h(c,l,f,p,s[d+13],4,681279174),p=h(p,c,l,f,s[d+0],11,-358537222),f=h(f,p,c,l,s[d+3],16,-722521979),l=h(l,f,p,c,s[d+6],23,76029189),c=h(c,l,f,p,s[d+9],4,-640364487),p=h(p,c,l,f,s[d+12],11,-421815835),f=h(f,p,c,l,s[d+15],16,530742520),l=h(l,f,p,c,s[d+2],23,-995338651),c=g(c,l,f,p,s[d+0],6,-198630844),p=g(p,c,l,f,s[d+7],10,1126891415),f=g(f,p,c,l,s[d+14],15,-1416354905),l=g(l,f,p,c,s[d+5],21,-57434055),c=g(c,l,f,p,s[d+12],6,1700485571),p=g(p,c,l,f,s[d+3],10,-1894986606),f=g(f,p,c,l,s[d+10],15,-1051523),l=g(l,f,p,c,s[d+1],21,-2054922799),c=g(c,l,f,p,s[d+8],6,1873313359),p=g(p,c,l,f,s[d+15],10,-30611744),f=g(f,p,c,l,s[d+6],15,-1560198380),l=g(l,f,p,c,s[d+13],21,1309151649),c=g(c,l,f,p,s[d+4],6,-145523070),p=g(p,c,l,f,s[d+11],10,-1120210379),f=g(f,p,c,l,s[d+2],15,718787259),l=g(l,f,p,c,s[d+9],21,-343485551),c=c+y>>>0,l=l+b>>>0,f=f+k>>>0,p=p+w>>>0}return t.endian([c,l,f,p])};a._ff=function(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._gg=function(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._hh=function(e,t,n,r,o,i,a){var s=e+(t^n^r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._ii=function(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(a(e,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):t.bytesToHex(r)}}()},function(e,t,n){"use strict";!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?n.push(t.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}};e.exports=n}()},function(e,t,n){"use strict";function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function o(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}e.exports=function(e){return null!=e&&(r(e)||o(e)||!!e._isBuffer)}}])});